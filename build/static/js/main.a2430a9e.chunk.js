(this.webpackJsonpso_pekocko=this.webpackJsonpso_pekocko||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(47),c=a.n(s),o=(a(115),a(3)),i=a(4),l=a(5),u=a(6),d=(a(116),a(8)),h=a(14),p=a(16),m="add_current_user",b="logout",x="get_all_sauces",j="getOneSauce",f=a(103),g=a.n(f).a.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});function O(e){e?g.defaults.headers.common.Authorization="Bearer ".concat(e):delete g.defaults.headers.common.Authorization}var v=a(49),y=a(15),w=a.n(y);function N(e){return{type:m,user:e}}var k=a(34),C=a(1),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={isOpen:!1,logo:"https://res.cloudinary.com/dtu1ahoyv/image/upload/v1634653503/flame_bg_vexzz8.png"},r.toggleButton=r.toggleButton.bind(Object(d.a)(r)),r.logout=r.logout.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"logout",value:function(e){e.preventDefault(),this.props.logout()}},{key:"toggleButton",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"getClassName",value:function(){var e="md:inline md:flex md:flex-row md:self-center text-lg md:mx-auto ";return e+=this.state.isOpen?"block":"hidden md:block"}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=Object(C.jsx)("ul",{className:"w-16 text-right",children:Object(C.jsx)("li",{className:"block hover:underline hover:opacity-80 focus:underline focus:opacity-80 hover:text-white focus:text-white p-2 hover:bg-gray-700 focus:bg-gray-700 rounded  ",children:Object(C.jsx)(h.b,{to:"/",onClick:this.logout,children:Object(C.jsx)(k.a,{className:"w-8 h-auto "})})})}),a=Object(C.jsxs)("ul",{className:"text-right ",children:[Object(C.jsx)("li",{className:"block hover:underline hover:opacity-80 focus:underline focus:opacity-80 hover:text-white focus:text-white  px-2 py-1 md:inline  md:px-5",children:Object(C.jsx)(h.b,{to:"/inscription",className:" hover:bg-gray-700 focus:bg-gray-700 rounded rounded-lg py-2 px-5 ",children:"Inscription"})}),Object(C.jsx)("li",{className:"block hover:underline hover:opacity-80 focus:underline focus:opacity-80 hover:text-white focus:text-white px-2 py-1 md:inline  md:px-5",children:Object(C.jsx)(h.b,{to:"/connexion",className:"hover:bg-gray-700 focus:bg-gray-700 rounded rounded-lg py-2 px-5",children:"Connexion"})})]}),r=Object(C.jsxs)("ul",{className:"",children:[Object(C.jsx)("li",{className:"block hover:underline hover:opacity-80 focus:underline focus:opacity-80 hover:text-white focus:text-white px-2 py-1  md:inline w-52 hover:bg-gray-700 focus:bg-gray-700 rounded rounded-lg ",children:Object(C.jsx)(h.b,{to:"/",className:"py-2 px-2",children:"HOME"})}),Object(C.jsx)("li",{className:"block hover:underline hover:opacity-80 focus:underline focus:opacity-80 hover:text-white focus:text-white px-2 py-1  md:inline w-52 hover:bg-gray-700 focus:bg-gray-700 rounded rounded-lg  ",children:Object(C.jsx)(h.b,{to:"/addsauce",className:"py-2 px-2",children:"Ajouter une sauce"})})]});return Object(C.jsxs)("div",{className:"container-fluid bg-pink-300 mx-auto flex flex-col md:flex-row text-lg ",children:[Object(C.jsxs)("div",{className:"flex justify-betwen  mb-2 p-2 ",children:[Object(C.jsxs)("div",{className:"mx-auto text-center flex justify-between ",children:[Object(C.jsx)("img",{className:"object-fit w-12",src:this.state.logo,alt:"logo flame Piquante"}),Object(C.jsxs)("h1",{className:"font-bold align-self-center text-red-piquant text-3xl ",children:["Piquante ",Object(C.jsx)("br",{}),Object(C.jsx)("span",{className:"text-sm",children:"La meilleur application de notation de sauces"})]})]}),Object(C.jsx)("button",{onClick:this.toggleButton,className:" md:hidden  ",tabIndex:"-1  ",children:Object(C.jsx)(k.d,{className:"w-12 p-2 mr-1 hover:opacity-80 hover:bg-yellow-400 text-gray-500 focus:opacity-80 focus:bg-yellow-400 border border-2 border-gray-500 rounded-lg shadow"})})]}),Object(C.jsxs)("div",{id:"links",className:this.getClassName(),children:[Object(C.jsxs)("div",{className:"px-2 pt-2 ",children:[" ",e?r:Object(C.jsx)("div",{style:{display:"none"}})," "]}),Object(C.jsxs)("div",{className:"p-2 -mt-2 md:justify-self-end",children:[" ",e?t:a," "]})]})]})}}]),a}(r.Component);var I=Object(p.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){localStorage.removeItem("jwtToken"),e(N({}))}}})(S),F=a(12),D=a(28),U=a(2),P=a.n(U),R=a(7),M=a(110),A=a(27),q=a(51),E=q.a().shape({email:q.b().required("Veuillez remplir votre email").email("Email invalid"),password:q.b().min(8,"Mot de passe doit avoir au minimum 8 characters").max(20,"Mot de passe doit avoir au maximum 20 characters").required("Mot de passe est demand\xe9").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&.])[A-Za-z\d@$!%*#?&.]{8,}$/," Mot de passe doit avoir 8 et 20 characters, 1 majuscule, 1 minuscule, 1 charact\xe8re sp\xe9cial (@$!%*#?&.)")});function L(){var e,t,a=Object(F.f)(),r=Object(A.d)({resolver:Object(M.a)(E)}),n=r.register,s=r.handleSubmit,c=r.formState.errors,o=r.reset,i=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({data:t}),e.next=3,g.post("/api/auth/signup",{email:t.email,password:t.password}).then((function(e){console.log(e),w.a.fire("Suc\xe8s. Veuillez connecter avec votre email"),a.push("/connexion")})).catch((function(e){console.log(e),w.a.fire("Veuillez v\xe9rifier les erreurs suivantes: <br>1. Email invalid <br> 2.Password doit avoir entre 8 et 20 characters, 1 majuscule, 1 minuscule, 1 charact\xe8re sp\xe9cial (@$!%*#?&.) <br>3. Email d\xe9j\xe0 utilis\xe9 ")}));case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("form",{onSubmit:s(i),className:"md:w-3/4 lg:w-1/2 md:mx-auto mx-2 my-12 bg-white border border-2 border-gray-200 p-2  rounded-xl ",children:[Object(C.jsx)("h2",{className:"text-center my-5 text-xxl font-extrabold text-purple-900 ",children:"Inscription"}),Object(C.jsxs)("div",{className:"grid grid-row-2 md:grid-cols-3 gap-4 mb-5 mx-5 mb-5 mx-5",children:[Object(C.jsx)("label",{className:" bg-white md:px-2 font-extrabold text-purple-900 ",htmlFor:"email",children:"Email"}),Object(C.jsx)("input",Object(D.a)({className:"md:col-span-2 h-full w-full px-2 py-1 border-gray-700 border border-4 rounded rounded-lg   bg-gray-200 hover:shadow-lg hover:font-bold hover:border-purple-500   focus:shadow-lg focus:font-bold focus:border-purple-500",type:"email",required:!0,name:"email",id:"email",placeholder:"email"},n("email")))]}),Object(C.jsx)("p",{className:"text-red-500 mx-auto text-center text-sm pb-2",children:null===(e=c.email)||void 0===e?void 0:e.message}),Object(C.jsxs)("div",{className:"grid grid-row-2 md:grid-cols-3 gap-4 mb-5 mx-5",children:[Object(C.jsx)("label",{className:" bg-white md:px-2 font-extrabold text-purple-900 ",htmlFor:"password",children:"Password"}),Object(C.jsx)("input",Object(D.a)({className:"md:col-span-2 h-full w-full px-2 py-1  border-gray-700 border border-4 rounded rounded-lg   bg-gray-200 hover:shadow-lg hover:font-bold hover:border-purple-500   focus:shadow-lg focus:font-bold focus:border-purple-500",type:"password",required:!0,id:"password",name:"password",placeholder:"password"},n("password")))]}),Object(C.jsx)("p",{className:"text-red-500 mx-auto text-center text-sm pb-2",children:null===(t=c.password)||void 0===t?void 0:t.message}),Object(C.jsx)("div",{className:"text-center",children:Object(C.jsx)("button",{type:"submit",className:"btn bg-violetClair text-white text-center w-32 mx-auto mt-3 mb-3 rounded rounded-xl shadow-2xl ring-purple-400 ring-2   hover:opacity-80 focus:opacity-80 hover:text-black focus:text-black",children:"Submit"})})]})}var T=a(18),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r.setState({errors:{},isLoading:!0}),r.props.login(r.state).then((function(e){console.log("log in ok"),r.props.history.push("/")}),(function(e){r.setState({errors:e.response.data.error,isLoading:!1}),w.a.fire("".concat(e.response.data.error))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={email:"",password:"",errors:{},isLoading:!1},r.handleSubmit=r.handleSubmit.bind(Object(d.a)(r)),r.onChange=r.onChange.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"onChange",value:function(e){this.setState(Object(T.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},className:"md:w-3/4 lg:w-1/2 md:mx-auto my-5 bg-white border border-2 border-gray-200 p-2  rounded-xl mx-2 ",children:[Object(C.jsx)("h2",{className:"text-center my-5 text-xxl font-extrabold text-purple-900 ",children:"Connexion"}),Object(C.jsxs)("div",{className:"grid grid-row-2 md:grid-cols-3 gap-4 mb-5 mx-5 mb-5 mx-5",children:[Object(C.jsx)("label",{className:" bg-white md:px-2 font-extrabold text-purple-900 ",htmlFor:"email",children:"Email"}),Object(C.jsx)("input",{required:!0,className:"md:col-span-2 h-full w-full px-2 py-1 border-gray-700 border border-4 rounded rounded-lg   bg-gray-200 hover:shadow-lg hover:font-bold hover:border-purple-500   focus:shadow-lg focus:font-bold focus:border-purple-500",type:"email",name:"email",id:"email",placeholder:"your email",onChange:this.onChange})]}),Object(C.jsxs)("div",{className:"grid grid-row-2 md:grid-cols-3 gap-4 mb-5 mx-5",children:[Object(C.jsx)("label",{className:"bg-white md:px-2 font-extrabold text-purple-900 ",htmlFor:"password",children:"Password"}),Object(C.jsx)("input",{className:"md:col-span-2 h-full w-full px-2 py-1  border-gray-700 border border-4 rounded rounded-lg   bg-gray-200 hover:shadow-lg hover:font-bold hover:border-purple-500   focus:shadow-lg focus:font-bold focus:border-purple-500",type:"password",id:"password",name:"password",required:!0,onChange:this.onChange})]}),Object(C.jsx)("div",{className:"text-center",children:Object(C.jsx)("button",{type:"submit",className:"btn bg-violetClair text-white text-center w-32 mx-auto mt-3 mb-3 rounded rounded-xl shadow-2xl ring-purple-400 ring-2   hover:opacity-80 focus:opacity-80 hover:text-black focus:text-black ",children:"LOGIN"})})]})}}]),a}(r.Component),z=Object(p.b)(null,{login:function(e){return function(t){return g.post("/api/auth/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),O(a),t(N(Object(v.a)(a)))}))}}})(Object(F.g)(_)),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).voirSauce=r.voirSauce.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getAllSauce().then((function(t){console.log("new list of sauces ",e.props.sauces)})).catch((function(e){console.log(e),w.a.fire("Probl\xe8me de server, veuillez retenter plus tard")}))}},{key:"displaySauce",value:function(){var e=this;return 0===this.props.sauces.length?Object(C.jsx)("div",{children:"No sauce "}):Object(C.jsx)("div",{className:"flex mx-auto flex-wrap my-12 ",children:this.props.sauces.map((function(t){return Object(C.jsx)(h.b,{to:"/sauce/".concat(t._id),onClick:function(a){return e.voirSauce(a,t.userId,t._id)},className:"mx-auto my-3 text-center p-2 hover:opacity-80 focus:opacity-80 ",children:Object(C.jsxs)("div",{className:"mx-auto w-80 h-80 p-5 text-center border border-black border-4 bg-white flex flex-col ",children:[Object(C.jsx)("div",{className:"p-1 w-64 h-64 border border-black border-2 mx-auto overflow-hidden ",children:Object(C.jsx)("img",{className:"object-contain ",src:t.imageUrl,alt:"sauce "})}),Object(C.jsxs)("div",{className:"p-2 mx-auto ",children:[Object(C.jsx)("p",{className:"uppercase text-yellow-500 ",children:t.name}),Object(C.jsxs)("p",{className:"mx-auto text-center text-red-500 ",children:["HEAT : ",t.heat]})]})]})},t._id)}))})}},{key:"voirSauce",value:function(e,t,a){console.log("sauce id ",a),console.log("id ",t),console.log("userId ",this.props.auth.user.userId),this.props.auth.user.userId!==t&&(e.preventDefault(),console.log("u not this user"))}},{key:"render",value:function(){return Object(C.jsx)("div",{children:this.displaySauce()})}}]),a}(r.Component);var H=Object(p.b)((function(e){return{sauces:e.sauces.sauces,auth:e.auth}}),{getAllSauce:function(){return function(e){return g.get("/api/sauces").then((function(t){var a;e((a=t.data,{type:x,sauces:a}))}))}}})(Object(F.g)(B)),$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return Object(C.jsxs)("div",{className:"bg-redPiquant ",children:[" ",e?Object(C.jsx)(H,{}):Object(C.jsx)(z,{})," "]})}}]),a}(r.Component);var V=Object(p.b)((function(e){return{sauces:e.sauces,auth:e.auth}}))($),J=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(T.a)({},e.target.name,e.target.value))},r.chooseFile=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("image").click();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readURI=function(){var e=Object(R.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&t.target.files[0]&&((a=new FileReader).onload=function(e){this.setState({imageURI:e.target.result})}.bind(Object(d.a)(r)),a.readAsDataURL(t.target.files[0]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadFile=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({image:t.target.files[0]});case 2:r.readURI(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleSubmit=function(){var e=Object(R.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("name",r.state.name),a.append("manufacturer",r.state.manufacturer),a.append("description",r.state.description),a.append("mainPepper",r.state.mainPepper),a.append("heat",parseInt(r.state.heat)),a.append("image",r.state.image),a.append("userId",r.props.auth.user.userId),a.append("cloudinary_id",""),e.next=12,g.post("/api/sauces",a).then((function(e){console.log("res",e),r.props.history.push("/")})).catch((function(e){console.log("err "),w.a.fire("Erreur. Veuillez v\xe9rifier si le nom de la sauce est d\xe9j\xe0 utilis\xe9, puis retenter plus tard"),r.props.history.push("/")}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={name:"",manufacturer:"",description:"",mainPepper:"",heat:1,image:"",imageURI:null,error:{}},r.handleChange=r.handleChange.bind(Object(d.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(d.a)(r)),r.chooseFile=r.chooseFile.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("form",{className:" lg:w-3/4 mx-2 md:mx-auto my-5 bg-white p-2 rounded ",onSubmit:function(t){return e.handleSubmit(t)},method:"post",encType:"multipart/form-data",children:[Object(C.jsx)("h3",{className:"text-yellow-500 mx-auto p-2 my-2 text-center font-semibold text-3xl ",children:"Ajouter votre sauce "}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{htmlFor:"name",className:"text-violetClair ",children:"Name"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"name",type:"text",required:!0,name:"name",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"manufacturer",children:"Manufacturer"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"manufacturer",type:"text",required:!0,name:"manufacturer",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"description",children:"Description"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"description",type:"text",required:!0,name:"description",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 flex flex-wrap ",children:[Object(C.jsxs)("div",{className:"mr-5 ",children:[Object(C.jsx)("input",{id:"image",type:"file",required:!0,accept:".jpg, .jpeg, .png",name:"image",style:{display:"none"},onChange:function(t){return e.loadFile(t)}}),Object(C.jsx)("button",{className:"text-white p-2 rounded ring-2 my-2 bg-redPiquant text-center hover:opacity-80 focus:opcity-80 hover:shadow focus:shadow ",onClick:this.chooseFile,children:"ADD FILE"})]}),Object(C.jsx)("div",{className:"",children:this.state.imageURI?Object(C.jsx)("img",{className:"w-28 p-2 border border-gray-200 rounded  object-contain ",src:this.state.imageURI,alt:this.state.name}):Object(C.jsx)("div",{style:{display:"none"}})})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"ingredient",children:"Main Peppers Ingr\xe9dients"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"ingredient",type:"text",required:!0,name:"mainPepper",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"flex flex-col mx-auto px-5 py-2 my-1 ",children:[Object(C.jsx)("label",{htmlFor:"heat",className:"text-violetClair ",children:"HEAT"}),Object(C.jsxs)("div",{className:"flex flex-col-reverse md:flex-row justify-between ",children:[Object(C.jsx)("input",{type:"range",className:"mr-2 my-1 md:w-3/4 ",min:"1",max:"10",id:"heat",name:"heat",value:this.state.heat,onChange:this.handleChange}),Object(C.jsx)("input",{type:"number",min:"1",max:"10",className:"w-16 rounded text-center text-base border border-black border-4 px-2 py-1 my-2 focus:bg-gray-200 focus:opacity-80 ",name:"heat",value:this.state.heat,onChange:this.handleChange})]})]}),Object(C.jsx)("div",{className:"text-center p-2 my-2",children:Object(C.jsx)("button",{className:"bg-violetClair text-white text-center w-32 mx-auto mt-3 mb-3 rounded rounded-xl shadow-2xl ring-purple-400 ring-2   hover:opacity-80 focus:opacity-80 hover:text-black focus:text-black ",type:"submit",children:"SUBMIT"})})]})}}]),a}(r.Component);var X=Object(p.b)((function(e){return{sauces:e.sauces,auth:e.auth}}))(Object(F.g)(J)),Z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).onLiked=Object(R.a)(P.a.mark((function e(){var t,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state.sauce.usersLiked.filter((function(e){return e===r.props.auth.user.userId})),a=r.state.sauce.usersDisliked.filter((function(e){return e===r.props.auth.user.userId})),0!==t.length||0===a&&0!==a){e.next=7;break}return e.next=5,r.setState({like:1});case 5:e.next=10;break;case 7:return console.log("new array 1 ",t),e.next=10,r.setState({like:0});case 10:return e.next=12,r.props.likeSauce(r.state.id,r.state.like,r.props.auth.user.userId).then((function(e){console.log(e),r.getOneSauce()})).catch((function(e){console.log(e)}));case 12:case"end":return e.stop()}}),e)}))),r.onDisliked=Object(R.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.state.sauce.usersDisliked.filter((function(e){return e===r.props.auth.user.userId})).length){e.next=6;break}return e.next=4,r.setState({like:-1});case 4:e.next=8;break;case 6:return e.next=8,r.setState({like:0});case 8:return e.next=10,r.props.likeSauce(r.state.id,r.state.like,r.props.auth.user.userId).then((function(e){console.log(e),r.getOneSauce()})).catch((function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e)}))),r.onDelete=Object(R.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.delete("/api/sauces/".concat(r.state.id)).then((function(e){console.log(e),w.a.fire("Sauce supprim\xe9e"),r.props.history.push("/")})).catch((function(e){console.log(e),w.a.fire("Erreur. Retenter plus tard")}));case 1:case"end":return e.stop()}}),e)}))),r.state={sauce:{},id:r.props.match.params.id,like:0},r.onDelete=r.onDelete.bind(Object(d.a)(r)),r.onLiked=r.onLiked.bind(Object(d.a)(r)),r.onDisliked=r.onDisliked.bind(Object(d.a)(r)),r.getOneSauce=r.getOneSauce.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getOneSauce()}},{key:"getOneSauce",value:function(){var e=Object(R.a)(P.a.mark((function e(){var t=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/api/sauces/".concat(this.state.id)).then((function(e){t.setState({sauce:e.data})})).catch((function(e){console.log("Erreur pour r\xe9cup\xe9rer cette sauce")}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"flex flex-col md:flex-row mx-2 lg:w-3/4 lg:mx-auto my-12 p-2 bg-white ",children:[Object(C.jsx)("img",{className:"md:mr-5 p-2 w-full md:w-8/12 lg:w-1/2 border border-2 text-center object-contain ",src:this.state.sauce.imageUrl,alt:this.state.sauce.name}),Object(C.jsxs)("div",{className:"ml-2 md:ml-5 p-2 ",children:[Object(C.jsxs)("h2",{className:"uppercase text-yellow-500 ",children:["Name: ",this.state.sauce.name]}),Object(C.jsxs)("h5",{className:"italic text-sm font-bold ",children:["Fait par: ",this.state.sauce.manufacturer," "]}),Object(C.jsxs)("h4",{className:"italic text-md font-bold text-purple-500 ",children:[" Description: ",Object(C.jsx)("br",{}),Object(C.jsxs)("span",{className:"text-lg text-black text-lg ",children:[" ",this.state.sauce.description," "]})]}),Object(C.jsxs)("div",{className:"mx-auto ",children:[Object(C.jsxs)("button",{className:"mx-5 p-3",children:[Object(C.jsx)(k.c,{onClick:this.onLiked,className:"h-7 w-7 text-blue-500 hover:text-green-500 focus:text-green-500 "}),Object(C.jsxs)("span",{children:[" ",this.state.sauce.likes," "]})]}),Object(C.jsxs)("button",{className:"mx-5 p-3",onClick:this.onDisliked,children:[Object(C.jsx)(k.b,{className:"h-7 w-7 text-current-color hover:text-red-500 "}),Object(C.jsxs)("span",{children:[" ",this.state.sauce.dislikes," "]})]})]}),Object(C.jsxs)("div",{className:"flex flex-wrap my-2 ",children:[Object(C.jsx)(h.b,{to:"/modify/sauce/".concat(this.state.id),children:Object(C.jsx)("button",{className:"bg-purple-500 text-white hover:text-black hover:opacity-80 focus:text-black focus:opacity-80 border border-2 border-black p-2  w-28 my-2 mx-3 rounded rounded-lg ring ring-purple-600 ring-offset-2 ring-offset-purple-100 ",onClick:this.onModify,children:"Modify"})}),Object(C.jsx)("button",{className:"bg-red-500 text-white hover:text-black hover:opacity-80 focus:text-black focus:opacity-80 border border-2 border-black p-2  w-28 my-2 mx-3  rounded rounded-lg ring ring-red-500 ring-offset-2 ring-offset-red-100 ",onClick:this.onDelete,children:"Delete"}),Object(C.jsx)(h.b,{to:"/",children:Object(C.jsx)("button",{className:" hover:text-yellow-500 hover:opacity-80 focus:text-yellow-500 focus:opacity-80 border border-2 border-black p-2  w-28 my-2 mx-3  rounded rounded-lg ring ring-gray-500 ring-offset-2 ring-offset-gray-100 ",children:"Back"})})]})]})]})})}}]),a}(r.Component);var G=Object(p.b)((function(e){return{auth:e.auth,sauces:e.sauces}}),{likeSauce:function(e,t,a){return function(r){return console.log("userId from front ",a),g.post("/api/sauces/".concat(e,"/like"),{like:t,userId:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}})(Object(F.g)(Z)),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).readURI=function(){var e=Object(R.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&t.target.files[0]&&((a=new FileReader).onload=function(e){this.setState({imageURI:e.target.result})}.bind(Object(d.a)(r)),a.readAsDataURL(t.target.files[0]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadFile=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({imageUrl:t.target.files[0]});case 2:r.readURI(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onSubmitModify=function(){var e=Object(R.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("name",r.state.name),a.append("manufacturer",r.state.manufacturer),a.append("mainPepper",r.state.mainPepper),a.append("description",r.state.description),a.append("heat",r.state.heat),a.append("image",r.state.imageUrl),e.next=10,g.put("/api/sauces/".concat(r.state.id),a).then((function(e){console.log(e),w.a.fire("Sauce modifi\xe9"),r.props.history.push("/")})).catch((function(e){console.log(e),w.a.fire("Erreur. Retenter plus tard")}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={name:"",manufacturer:"",description:"",mainPepper:"",heat:"",imageUrl:"",id:r.props.match.params.id,imgURI:null},r.loadFile=r.loadFile.bind(Object(d.a)(r)),r.onSubmitModify=r.onSubmitModify.bind(Object(d.a)(r)),r.handleChange=r.handleChange.bind(Object(d.a)(r)),r.readURI=r.readURI.bind(Object(d.a)(r)),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getOneSauce()}},{key:"getOneSauce",value:function(){var e=Object(R.a)(P.a.mark((function e(){var t=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/api/sauces/".concat(this.state.id)).then((function(e){t.setState({name:e.data.name}),t.setState({manufacturer:e.data.manufacturer}),t.setState({description:e.data.description}),t.setState({imageUrl:e.data.imageUrl}),t.setState({mainPepper:e.data.mainPepper}),t.setState({heat:e.data.heat})})).catch((function(e){console.log("Erreur pour r\xe9cup\xe9rer cette sauce")}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(T.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("form",{className:"lg:w-3/4 mx-2 md:mx-auto my-5 bg-white p-2 rounded ",onSubmit:function(t){return e.onSubmitModify(t)},method:"post",encType:"multipart/form-data",children:[Object(C.jsx)("h3",{className:"text-yellow-500 mx-auto p-2 my-2 text-center font-semibold text-3xl ",children:"Modifier votre sauce "}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"name",children:"Name"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"name",type:"text",name:"name",value:this.state.name||"",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"manufacturer",children:"Manufacturer"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"manufacturer",type:"text",name:"manufacturer",value:this.state.manufacturer||"",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"description",children:"Description"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"description",type:"text",name:"description",value:this.state.description||"",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"p-2 my-1 flex flex-wrap ",children:[Object(C.jsx)("div",{className:"mr-5 ",children:Object(C.jsx)("input",{id:"image",type:"file",accept:".jpg, .jpeg, .png",name:"image",onChange:function(t){return e.loadFile(t)}})}),Object(C.jsx)("div",{children:this.state.imageURI?Object(C.jsx)("img",{id:"outputImg",className:"w-28 p-2 border border-gray-200 rounded  object-contain ",src:this.state.imageURI||"",alt:"sauce added"}):Object(C.jsx)("img",{className:"w-28 p-2 border border-gray-200 rounded  object-contain ",src:this.state.imageUrl,alt:this.state.name})})]}),Object(C.jsxs)("div",{className:"p-2 my-1 ",children:[Object(C.jsx)("label",{className:"text-violetClair ",htmlFor:"ingredient",children:"Main Peppers Ingr\xe9dients"}),Object(C.jsx)("input",{className:"mx-auto h-full w-full px-2 transition-all border-gray-500 border-2 rounded-sm bg-white focus:bg-gray-100 ",id:"ingredient",type:"text",name:"mainPepper",value:this.state.mainPepper||"",onChange:this.handleChange})]}),Object(C.jsxs)("div",{className:"flex flex-col mx-auto px-5 py-2 my-1 ",children:[Object(C.jsx)("label",{htmlFor:"heat",className:"text-violetClair ",children:"HEAT"}),Object(C.jsxs)("div",{className:"flex flex-col-reverse md:flex-row justify-between ",children:[Object(C.jsx)("input",{type:"range",className:"mr-2 my-1 md:w-3/4 ",min:"1",max:"10",id:"heat",name:"heat",value:this.state.heat||"",onChange:this.handleChange}),Object(C.jsx)("input",{type:"number",min:"1",max:"10",className:"w-16 rounded text-center text-base border border-black border-4 px-2 py-1 my-2 focus:bg-gray-200 focus:opacity-80 ",name:"heat",value:this.state.heat||"",onChange:this.handleChange})]})]}),Object(C.jsx)("div",{className:"text-center p-2 my-2",children:Object(C.jsx)("button",{className:"bg-violetClair text-white text-center w-32 mx-auto mt-3 mb-3 rounded rounded-xl shadow-2xl ring-purple-400 ring-2   hover:opacity-80 focus:opacity-80 hover:text-black focus:text-black ",type:"submit",children:"SUBMIT"})})]})}}]),a}(n.a.Component);var K=Object(p.b)((function(e){return console.log("state dans "),{auth:e.auth,sauce:e.sauces.sauce}}),{modifySauce:function(e,t){return function(a){g.put("/api/sauces/".concat(e),t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}})(Object(F.g)(W)),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(h.a,{children:[Object(C.jsx)(I,{}),Object(C.jsxs)(F.c,{children:[Object(C.jsx)(F.a,{path:"/",exact:!0,component:V}),Object(C.jsx)(F.a,{path:"/inscription",component:L}),Object(C.jsx)(F.a,{path:"/connexion",component:z}),Object(C.jsx)(F.a,{path:"/addsauce",component:X}),Object(C.jsx)(F.a,{path:"/sauce/:id",component:G}),Object(C.jsx)(F.a,{path:"/modify/sauce/:id",component:K})]})]})})}}]),a}(r.Component),Y=Q,ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,251)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},te=a(40),ae=a(108),re=a(109),ne=a.n(re),se={isAuthenticated:!1,user:{}};var ce={sauces:[],sauce:{}};var oe=Object(te.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return{isAuthenticated:!ne()(t.user),user:t.user};case b:return{isAuthenticated:!1,user:{}};default:return e}},sauces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case x:return Object(D.a)(Object(D.a)({},e),{},{sauces:t.sauces});case j:return Object(D.a)(Object(D.a)({},e),{},{sauce:t.sauce});default:return e}}}),ie=oe,le=a(17),ue=Object(le.a)(),de=Object(te.c)(ie,Object(te.a)(ae.a));de.subscribe((function(){console.log("state change ",de.getState())})),localStorage.jwtToken&&(O(localStorage.jwtToken),de.dispatch(N(Object(v.a)(localStorage.jwtToken)))),c.a.render(Object(C.jsx)(p.a,{store:de,children:Object(C.jsx)(h.a,{children:Object(C.jsx)(Y,{history:ue})})}),document.getElementById("root")),ee()}},[[250,1,2]]]);
//# sourceMappingURL=main.a2430a9e.chunk.js.map